<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Happy Birthday Pumpy</title>
    <style>
      body {
        margin: 0;
        overflow: hidden;
        font-family: "Comic Sans MS", cursive;
        background-color: #b0e0e6;
      }

      h1 {
        text-align: center;
        margin: 20px;
        font-size: 2.5em;
        color: #e91e63;
        animation: pulse 2s infinite;
        z-index: 10;
        position: relative;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      .sky {
        width: 100%;
        height: 100vh;
        position: relative;
        overflow: show;
      }

      .cloud {
        position: absolute;
        background: #fff;
        border-radius: 50%;
        width: 80px;
        height: 50px;
        top: -10%;
        /* initial position set inline or via nth-child */
        animation-name: cloudMove;
        animation-timing-function: linear;
        animation-iteration-count: infinite;
        animation-fill-mode: forwards;
      }

      .cloud::before,
      .cloud::after {
        content: "";
        position: absolute;
        background: #fff;
        border-radius: 50%;
      }

      .cloud::before {
        width: 60px;
        height: 60px;
        left: -30px;
        top: 10px;
      }

      .cloud::after {
        width: 50px;
        height: 50px;
        left: 20px;
        top: -20px;
      }

      .cloud {
        width: 80px;
        height: 50px;
        top: 50px;
        left: -100px;
        animation: cloudMove 60s linear infinite;
      }

      @keyframes cloudMove {
        0% {
          transform: translateX(0);
        }
        100% {
          transform: translateX(
            calc(100vw + 100px)
          ); /* 100px extra so cloud fully moves off screen */
        }
      }

      .cloud::before,
      .cloud::after {
        content: "";
        position: absolute;
        background: #fff;
        border-radius: 50%;
      }
      .cloud::before {
        width: 60px;
        height: 60px;
        left: -30px;
        top: 10px;
      }
      .cloud::after {
        width: 50px;
        height: 50px;
        left: 20px;
        top: -20px;
      }

      .grass {
        height: 20vh;
        background: #4caf50;
        position: relative;
      }

      .scene {
        position: absolute;
        bottom: 20vh;
        width: 100%;
        height: 60vh;
      }

      .character {
        position: absolute;
        width: 80px;
        height: 160px;
        bottom: 0;
      }

      .head {
        width: 60px;
        height: 60px;
        background: #ffe0cc;
        border-radius: 50%;
        margin: 0 auto;
        position: relative;
        z-index: 2;
      }

      .eyes {
        position: absolute;
        width: 16px;
        height: 16px;
        background: #fff;
        border: 1.5px solid #555;
        border-radius: 50%;
        top: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        box-shadow: inset 0 2px 3px rgba(0, 0, 0, 0.1);
      }

      .eyes::before {
        content: "";
        width: 6px;
        height: 6px;
        background: #333;
        border-radius: 50%;
        box-shadow: 0 1px 1px rgba(255, 255, 255, 0.5);
        position: relative;
        top: 1px;
        left: 1px;
      }

      .eyes.left {
        left: 12px;
      }

      .eyes.right {
        right: 12px;
      }

      .smile {
        position: absolute;
        width: 26px;
        height: 14px;
        border: 2px solid transparent;
        border-bottom: 3px solid #555;
        border-radius: 0 0 50% 50%;
        bottom: 12px;
        left: 17px;
        background: transparent;
        box-shadow: 0 2px 1px rgba(0, 0, 0, 0.1);
        transform-origin: center;
        animation: none;
      }

      .body {
        width: 60px;
        height: 80px;
        margin: 0 auto;
        position: relative;
        top: -10px;
        z-index: 1;
      }

      .hand {
        width: 15px;
        height: 15px;
        background: #ffe0cc;
        border-radius: 50%;
        position: absolute;
        top: 35px;
        z-index: 0;
      }

      .hand.left {
        left: -10px;
      }

      .hand.right {
        right: -10px;
      }

      .feet {
        display: flex;
        justify-content: space-between;
        width: 60px;
        margin: -5px auto 0 auto;
      }

      .foot {
        width: 20px;
        height: 10px;
        border-radius: 5px;
      }

      /* Girl */
      .girl {
        left: 10%;
      }

      .girl .hair {
        position: absolute;
        width: 70px;
        height: 40px;
        background: #ff69b4;
        border-radius: 50% 50% 40% 40%;
        top: -10px;
        left: -5px;
      }

      .girl .ponytail {
        position: absolute;
        width: 20px;
        height: 40px;
        background: #ff69b4;
        border-radius: 50%;
        top: 20px;
        right: 50px;
        z-index: -1;
      }

      .girl .body {
        background: #4fc3f7;
        border-radius: 30% 30% 40% 40%;
      }

      .girl .heart {
        position: absolute;
        top: 25px;
        left: 20px;
        width: 20px;
        height: 20px;
        background: #ff1493;
        transform: rotate(-45deg);
      }

      .girl .heart::before,
      .girl .heart::after {
        content: "";
        width: 20px;
        height: 20px;
        background: #ff1493;
        border-radius: 50%;
        position: absolute;
      }

      .girl .heart::before {
        top: -10px;
        left: 0;
      }

      .girl .heart::after {
        left: 10px;
        top: 0;
      }

      .girl .foot {
        background: #ff1493;
      }

      /* Boy */
      .boy {
        right: 10%;
      }

      .boy .hair {
        position: absolute;
        width: 60px;
        height: 30px;
        background: #8b4513;
        border-radius: 30px 30px 0 0;
        top: -10px;
        left: 0;
        z-index: 3;
      }

      .boy .body {
        background: #f44336;
        border-radius: 30% 30% 10% 10%;
        transform: scaleX(-1);
      }

      .boy .pants {
        width: 60px;
        height: 25px;
        background: #2196f3;
        position: absolute;
        top: 55px;
        border-radius: 0 0 5px 5px;
      }

      .boy .foot {
        background: #333;
      }

      .bouquet {
        position: absolute;
        bottom: 130px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 2.5rem;
        display: none;
        animation: popUp 1s forwards;
      }

      @keyframes moveRight {
        to {
          left: calc(50% - 80px);
        }
      }

      @keyframes moveLeft {
        to {
          right: calc(50% - 80px);
        }
      }

      @keyframes popUp {
        from {
          opacity: 0;
          transform: translateX(-50%) scale(0.5);
        }
        to {
          opacity: 1;
          transform: translateX(-50%) scale(1);
        }
      }

      .grass {
        position: absolute;
        bottom: 0;
        width: 100%;
        height: 100vh;
        top: 50%;
        background: #4caf50;
        border-radius: 50%;
        overflow: hidden;
      }

      .scene {
        position: absolute;
        bottom: 35vh; /* align with top of curved grass */
        width: 100%;
        height: 60vh;
        pointer-events: none;
        z-index: 3;
        overflow: show;
      }

      .character {
        pointer-events: auto; /* re-enable if needed */
      }
      .floating-pay-btn {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 999;
        background-color: #ff69b4;
        color: white;
        border: none;
        padding: 14px 28px;
        font-size: 1.5rem;
        border-radius: 14px;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
        cursor: pointer;
        transition: transform 0.2s ease-in-out;
      }

      .floating-pay-btn:hover {
        transform: translate(-50%, -50%) scale(1.1);
      }

      .moveGirl {
        animation: moveRight 5s forwards;
      }
      .moveBoy {
        animation: moveLeft 5s forwards;
      }

      #bouquet-container {
        position: absolute;
        /* width: 100vw; */
        z-index: 1;
        margin: auto;
        /* top: -100%; */
        left: 40%;
        width: 100px;
        height: 100px;
      }

      .flower {
        position: absolute;
        width: 20vw;
        max-width: 200px;
        height: 30vw;
        max-height: 300px;
        transform-origin: bottom center;
        transition: transform 3s ease-in-out;
        transform: scale(0.2);
      }

      .petal {
        position: absolute;
        width: 8vw;
        max-width: 80px;
        height: 12vw;
        max-height: 120px;
        border-radius: 50%;
        opacity: 0.9;
      }

      .rose .petal {
        top: 45px;
        left: 65px;
      }

      .rose .petal:nth-child(1) {
        transform: rotate(0deg) translateY(-45px);
      }
      .rose .petal:nth-child(2) {
        transform: rotate(72deg) translateY(-45px);
      }
      .rose .petal:nth-child(3) {
        transform: rotate(144deg) translateY(-45px);
      }
      .rose .petal:nth-child(4) {
        transform: rotate(216deg) translateY(-45px);
      }
      .rose .petal:nth-child(5) {
        transform: rotate(288deg) translateY(-45px);
      }

      .orchid .petal1 {
        top: 35px;
        left: 90px;
        transform: rotate(0deg);
      }
      .orchid .petal2 {
        top: 25px;
        left: 50px;
        transform: rotate(-30deg);
      }
      .orchid .petal3 {
        top: 25px;
        right: 50px;
        transform: rotate(30deg);
      }
      .orchid .petal4 {
        top: 70px;
        left: 25px;
        transform: rotate(-60deg);
      }
      .orchid .petal5 {
        top: 70px;
        right: 25px;
        transform: rotate(60deg);
      }

      .center {
        position: absolute;
        top: 75px;
        left: 75px;
        width: 25px;
        height: 25px;
        background: yellow;
        border-radius: 50%;
      }

      .stem {
        position: absolute;
        bottom: 0;
        left: 50%;
        width: 1vw;
        max-width: 10px;
        height: 25vw;
        max-height: 150px;
        background: green;
        transform: translateX(-50%);
        transition: height 2s ease-in-out;
      }

      .bouquet-converge {
        transform: translate(calc(var(--tx)), calc(var(--ty) - 10vw))
          rotate(var(--angle));
      }

      .confetti {
        position: fixed;
        width: 8px;
        height: 8px;
        background-color: red; /* will override randomly in JS */
        opacity: 0.9;
        pointer-events: none;
        will-change: transform;
        border-radius: 2px;
        animation-name: fall;
        animation-timing-function: linear;
        animation-fill-mode: forwards;
      }

      @keyframes fall {
        0% {
          transform: translateY(-10px) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: translateY(100vh) rotate(360deg);
          opacity: 0;
        }
      }

      .hanging-container {
        position: fixed;
        left: 20px; /* Distance from left */
        top: 0;
        height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .hanging-container-right {
        position: fixed;
        right: 20px; /* Distance from left */
        top: 0;
        height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .photo-wrapper {
        position: relative;
        margin-top: 80px; /* different margin for each photo */
        transform-origin: top center;
        animation-name: dangle;
        animation-timing-function: ease-in-out;
        animation-iteration-count: infinite;
        z-index: 10;
      }

      /* Different delays and durations for staggered swinging */
      .photo-wrapper:nth-child(1) {
        animation-duration: 6s;
        animation-delay: 0s;
        margin-top: 50px;
      }

      .photo-wrapper:nth-child(2) {
        animation-duration: 7s;
        animation-delay: 1.5s;
        margin-top: 80px;
      }

      .photo-wrapper:nth-child(3) {
        animation-duration: 5.5s;
        animation-delay: 0.7s;
        margin-top: -500px;
      }

      /* String comes from the top of the viewport */
      .string {
        position: absolute;
        top: -80px; /* Start above the photo frame */
        left: 50%;
        transform: translateX(-50%);
        width: 2px;
        height: 80px; /* length from top of screen to frame */
        background: #654321;
        border-radius: 1px;
        box-shadow: inset 0 0 3px white;
      }

      .long {
        height: 320px;
      }

      .long-right {
        height: 400px;
      }

      .mid {
        top: 50%;
      }

      .mid-right {
        top: 90%;
      }

      /* Polaroid-style frame */
      .photo-frame {
        width: 140px;
        height: 180px;
        background: white;
        border: 8px solid white;
        border-bottom-width: 30px; /* thicker bottom to simulate Polaroid */
        box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
        border-radius: 8px;
        overflow: hidden;
        position: relative;
      }

      .photo-frame img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        border-radius: 4px;
      }

      /* Pendulum swing animation */
      @keyframes dangle {
        0%,
        100% {
          transform: rotate(-5deg);
        }
        50% {
          transform: rotate(5deg);
        }
      }
    </style>
  </head>
  <body>
    <div class="hanging-container">
      <div class="photo-wrapper">
        <div class="string"></div>
        <div class="photo-frame">
          <img src="2.jpeg" alt="Photo 1" />
        </div>
      </div>

      <div class="photo-wrapper">
        <div class="string"></div>
        <div class="photo-frame">
          <img src="3.JPG" alt="Photo 2" />
        </div>
      </div>

      <div class="photo-wrapper">
        <div class="string long"></div>
        <div class="photo-frame mid">
          <img src="1.jpeg" alt="Photo 3" />
        </div>
      </div>
    </div>

    <div class="hanging-container-right">
      <div class="photo-wrapper">
        <div class="string"></div>
        <div class="photo-frame">
          <img src="5.jpeg" alt="Photo 1" />
        </div>
      </div>

      <div class="photo-wrapper" style="top: -300px">
        <div class="string long-right"></div>
        <div class="photo-frame mid-right">
          <img src="4.JPG" alt="Photo 3" />
        </div>
      </div>
    </div>

    <div
      id="message"
      class="message"
      style="z-index: 5; background: #b0e0e6; overflow: show"
    >
      <svg viewBox="0 0 950 220" style="width: 100%; height: 220px">
        <defs>
          <filter id="shadow">
            <feDropShadow
              dx="2"
              dy="2"
              stdDeviation="2"
              flood-color="#000000"
              flood-opacity="0.5"
            />
          </filter>
        </defs>

        <!-- Adjusted path: start and end y moved down to 180, control point at 50 -->
        <path id="curve" fill="transparent" d="M50,180 Q400,50 950,180" />

        <text
          font-size="60"
          fill="#d11a7b"
          style="font-family: 'Rubik Wet Paint', cursive"
          filter="url(#shadow)"
        >
          <textPath href="#curve" startOffset="50%" text-anchor="middle">
            HAPPY BIRTHDAY PUMPY!!!
          </textPath>
        </text>
      </svg>
    </div>
    <button class="floating-pay-btn" id="playButton">ðŸ’– Play ðŸ’–</button>

    <div class="sky">
      <div class="cloud" style="top: -10px"></div>
      <div class="cloud" style="top: -90px"></div>
      <div class="cloud" style="top: -130px"></div>
      <div class="cloud" style="top: -60px"></div>
      <div class="cloud" style="top: -120px"></div>
      <div class="cloud" style="top: -150px"></div>
      <div class="cloud" style="top: -90px"></div>
      <div class="cloud" style="top: -130px"></div>

      <div class="cloud" style="top: -130px"></div>
      <div class="cloud" style="top: -60px"></div>
      <div class="cloud" style="top: -120px"></div>
      <div class="cloud" style="top: -150px"></div>

      <div class="scene">
        <div class="character girl">
          <div class="head">
            <div class="hair"></div>
            <div class="ponytail"></div>
            <div class="eyes left"></div>
            <div class="eyes right"></div>
            <div class="smile"></div>
          </div>
          <div class="body">
            <div class="heart"></div>
            <div class="hand left"></div>
            <div class="hand right"></div>
          </div>
          <div class="feet">
            <div class="foot"></div>
            <div class="foot"></div>
          </div>
        </div>

        <div class="character boy">
          <div class="head">
            <div class="hair"></div>
            <div class="eyes left"></div>
            <div class="eyes right"></div>
            <div class="smile"></div>
          </div>
          <div class="body">
            <div class="pants"></div>
            <div class="hand left"></div>
            <div class="hand right"></div>
          </div>
          <div class="feet">
            <div class="foot"></div>
            <div class="foot"></div>
          </div>
        </div>

        <div id="bouquet-container"></div>
      </div>
    </div>

    <div class="grass"></div>
    <audio id="birthday-audio1" loop>
      <source src="ED SHEERAN PERFECT (instrumental).mp3" type="audio/mpeg" />
      Your browser does not support the audio element.
    </audio>
    <audio id="birthday-audio" loop>
      <source
        src="Happy Birthday Cheering - Sound Effect No Copyright.mp3"
        type="audio/mpeg"
      />
      Your browser does not support the audio element.
    </audio>
    <script>
      const clouds = document.querySelectorAll(".cloud");
      const speeds = [0.2, 0.15, 0.1, 0.12, 0.18];

      clouds.forEach((cloud) => {
        cloud.style.left = Math.random() * window.innerWidth + "px";
      });

      function animateClouds() {
        clouds.forEach((cloud, index) => {
          let left = parseFloat(cloud.style.left) || 0;
          left += speeds[index % speeds.length];
          if (left > window.innerWidth + 80) {
            left = -80;
          }
          cloud.style.left = left + "px";
        });
        requestAnimationFrame(animateClouds);
      }

      // Initially pause characters
      document.querySelector(".girl").classList.add("paused");
      document.querySelector(".boy").classList.add("paused");

      const playButton = document.getElementById("playButton");

      playButton.addEventListener("click", () => {
        // Remove pause
        const audio = document.getElementById("birthday-audio1");
        audio.currentTime = 60;
        const playPromise = audio.play();
        document.querySelector(".girl").classList.add("moveGirl");
        document.querySelector(".boy").classList.add("moveBoy");

        // Hide button
        playButton.style.display = "none";

        // Show bouquet after animation
        setTimeout(() => {
          //   document.querySelector(".bouquet").style.display = "block";
          createBoquet();
        }, 5000);
      });
      function createBoquet() {
        const flowerCount = 30;
        const colors = [
          "red",
          "pink",
          "hotpink",
          "purple",
          "violet",
          "magenta",
          "orchid",
          "salmon",
          "deeppink",
        ];

        const container = document.getElementById("bouquet-container");

        function updateBouquetPoint() {
          return {
            x: container.clientWidth / 2.5,
            y: container.clientHeight * 0.7,
          };
        }

        let bouquetPoint = updateBouquetPoint();

        window.addEventListener("resize", () => {
          bouquetPoint = updateBouquetPoint();
        });

        for (let i = 0; i < flowerCount; i++) {
          const flower = document.createElement("div");
          const isRose = Math.random() > 0.5;
          flower.className = `flower ${isRose ? "rose" : "orchid"}`;

          // Random start anywhere in the container (full screen)
          const startX = Math.random() * container.clientWidth;
          const startY = Math.random() * container.clientHeight;

          flower.style.left = `${startX}px`;
          flower.style.top = `${startY}px`;

          // Calculate vector to center point
          const dx = bouquetPoint.x - startX;
          const dy = bouquetPoint.y - startY;

          // Calculate angle so flower points toward center
          const rawAngle = (Math.atan2(dy, dx) * 45) / Math.PI;
          const angle = rawAngle; // Adjust so flowers face upward

          flower.style.setProperty("--angle", `${angle}deg`);
          flower.style.setProperty("--tx", `${dx}px`);
          flower.style.setProperty("--ty", `${dy}px`);

          // Add petals
          if (isRose) {
            for (let j = 0; j < 5; j++) {
              const petal = document.createElement("div");
              petal.className = "petal";
              petal.style.background =
                colors[Math.floor(Math.random() * colors.length)];
              flower.appendChild(petal);
            }
          } else {
            for (let j = 1; j <= 5; j++) {
              const petal = document.createElement("div");
              petal.className = `petal petal${j}`;
              petal.style.background =
                colors[Math.floor(Math.random() * colors.length)];
              flower.appendChild(petal);
            }
          }

          const center = document.createElement("div");
          center.className = "center";
          flower.appendChild(center);

          const stem = document.createElement("div");
          stem.className = "stem";
          flower.appendChild(stem);

          container.appendChild(flower);

          setTimeout(() => {
            flower.classList.add("bouquet-converge");
            setTimeout(() => {
              launchConfetti();
              const na = document.getElementById("birthday-audio");
              const pp = audio.play();
            }, 200);
          }, 100);
        }

        // After 3.2 seconds (convergence duration + small buffer), show message
        setTimeout(() => {
          const message = document.getElementById("message");
          message.classList.remove("hidden");
          message.classList.add("fade-in");
        }, 3000);
      }

      const grass = document.querySelector(".grass");
      const grassRect = grass.getBoundingClientRect();
      const grassWidth = grassRect.width;
      const grassHeight = grassRect.height;

      const flowerTypes = ["rose", "orchid"];

      for (let i = 0; i < 100; i++) {
        const type =
          flowerTypes[Math.floor(Math.random() * flowerTypes.length)];
        const left = Math.floor(Math.random() * grassWidth + 50);
        const top = Math.floor(Math.random() * grassHeight - 220);
        const scale = (0.05 + Math.random() * 0.25).toFixed(2);

        let petalsHtml = "";
        if (type === "rose") {
          for (let p = 0; p < 5; p++) petalsHtml += `<div class="petal"></div>`;
        } else {
          for (let p = 1; p <= 5; p++)
            petalsHtml += `<div class="petal petal${p}"></div>`;
        }

        const flowerHtml = `
    <div class="flower ${type}" style="position:absolute; left:${left}px; top:${top}px; transform: scale(${scale});">
      ${petalsHtml}
      <div class="center"></div>
      <div class="stem"></div>
    </div>
  `;

        grass.insertAdjacentHTML("beforeend", flowerHtml);
      }

      const petalColors = [
        "#f96b4c",
        "#f97b4c",
        "#f9a24c",
        "#f9f94c",
        "#b0f94c",
        "#4cf959",
        "#4cf9b7",
        "#4cd4f9",
        "#4c97f9",
        "#494cf9",
        "#a94cf9",
        "#f94cda",
      ];

      // Select all petals (both rose and orchid petals)
      const petals = document.querySelectorAll(
        ".petal, .petal1, .petal2, .petal3, .petal4, .petal5"
      );

      petals.forEach((petal) => {
        // Pick a random color from the array
        const color =
          petalColors[Math.floor(Math.random() * petalColors.length)];
        petal.style.backgroundColor = color;
      });

      function createConfettiPiece() {
        const confetti = document.createElement("div");
        confetti.classList.add("confetti");

        // random horizontal start position
        confetti.style.left = Math.random() * window.innerWidth + "px";
        confetti.style.top = Math.random() * window.innerWidth * -1 + "px";

        // random color for confetti
        const colors = [
          "#f44336",
          "#e91e63",
          "#9c27b0",
          "#2196f3",
          "#4caf50",
          "#ffeb3b",
          "#ff9800",
        ];
        confetti.style.backgroundColor =
          colors[Math.floor(Math.random() * colors.length)];

        // random animation duration and delay for a natural effect
        confetti.style.animationDuration = 3 + Math.random() * 3 + "s";
        confetti.style.animationDelay = Math.random() * 5 + "s";

        document.body.appendChild(confetti);

        // remove confetti after animation ends to keep DOM clean
        confetti.addEventListener("animationend", () => {
          confetti.remove();
        });
      }

      function launchConfetti(count = 100) {
        for (let i = 0; i < count; i++) {
          setTimeout(createConfettiPiece, i * 50);
        }
      }
    </script>
  </body>
</html>
